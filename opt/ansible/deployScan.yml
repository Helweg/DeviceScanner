---
- hosts: all
  sudo: true
  vars:
     packages: ['git', 'python3-pip']
  tasks:
     - name: Install Package
       apt: name={{ item }} state=latest
       with_items: packages

     - name: Get DeviceScanner from Git
       git: accept_hostkey=True repo=https://github.com/Helweg/DeviceScanner.git dest=/tmp/git

     - name: Installing nmap for python
       command: pip3 install python-nmap
     
     - name: Move Git files
       command: mv /tmp/git/opt/ /opt/ && mv /tmp/git/etc/ /etc/
       
     - name: Start Service
       command: /etc/init.d/pressScanner start
